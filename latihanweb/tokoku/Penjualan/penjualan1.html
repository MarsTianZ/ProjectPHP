<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        LABEL{
            font-family: sans-serif;
            font-size: 15px;
            font-weight: bold;
         }
            h1 {
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            color: white;
            font-family: sans-serif;
            }
            input[type=text] {
                font-size: 18px;
                font-family: sans-serif;
                width: 100%;
                padding: 12px 20px;
                margin: 8px 0;
                box-sizing: border-box;
                border: none;
                border-bottom: 2px solid #000000;
                color: rgb(0, 0, 0);
                outline: none; 
            }
            input[type=password] {
                font-size: 18px;
                font-family: sans-serif;
                width: 100%;
                padding: 12px 20px;
                margin: 8px 0;
                box-sizing: border-box;
                border: none;
                border-bottom: 2px solid #000000;
                color: rgb(0, 0, 0);
                outline: none; 
            }
            select {
                font-size: 18px;
                font-family: sans-serif;
                width: 100%;
                padding: 16px 20px;
                border: none;
                border-bottom: 2px solid #000000;
            }

            #pilih{
            border-radius: 8px;
            color: #515253;
            }
            #pilih:hover{
                background-color: gray;
                color: white;
            }
            table{
                border-radius: 15px;
                border: none;
                background-color: silver;
                border-collapse: collapse;
                width:80%;  
                margin-left: auto;
                margin-right: auto;
                font-family: sans-serif;
                }
                thead, td {
                padding: 8px;
                text-align: center;   
                border-bottom: 0px;
                font-family: sans-serif;
                }
                thead {
                font-weight: bolder;
                border: none;
                color: rgb(0, 0, 0);
            }
                /* button:hover{
                box-shadow: 2px 2px 2px 2px rgb(196, 255, 205);
                margin: 3px;
                background-color: rgb(9, 73, 19);
                color: rgb(255, 255, 255);
                }
                button {
                border-radius: 15px;
                padding: 20px;
                background-color: rgb(196, 255, 205);
                box-shadow: 2px 2px 2px 2px rgb(9, 73, 19);
                margin: 3px;
                border: none;
                font-size: 15px;
                font-weight: bold;
            } */
            #total{
                font-weight: bold;
                font-family: sans-serif;
            }
            
    </style>
     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script> 
</head>
<body>
    
    <h1>Insert Barang(Penjualan)</h1>
    <P id="coba"></P>
    <form action="penjualan.html" target="" method="post" autocomplete="on">
        <table border="1" class="form" width="40%">
        <tr>
            <td>
                <label for="kd">Kode</label>
            </td>
            <td width="70%">
                <input type="text" id="kd" readonly></input>
            </td>
        </tr>
        <tr>
            <td>
                <label for="tgl">Tgl</label>
            </td>
            <td>
                <input type="text" id="tgl" readonly></input>
            </td>
        </tr>
        <tr>
            <td>
                <label for="konsumen">Konsumen</label>
            </td>
            <td>
                <input type="text" id="konsumen"></input>
            </td>
        </tr>
        <tr>
            <td>
                <label for="karyawan">Karyawan</label>
            </td>
            <td>
                <select name="karyawan" id="jab" onchange="kar(value)">
                    <option value="Agung">Agung</option>
                    <option value="Buana">Buana</option>
                    <option value="Maimunah">Maimunah</option>
                    <option value="Harta">Hanta</option>
                    <option value="Tirta">Tirta</option>
                    <option value="Cahaya">Cahaya</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <label for="jabatan">Jabatan</label>
            </td>
            <td>
                <select name="jabatan" id="jabatan" disabled>
                    <option value="admin">Admin</option>
                    <option value="supervisor">Supervisor</option>
                    <option value="operator">Operator</option>
                    <option value="manager">Manager</option>
                </select>
            </td>
        </tr>
    </table>
    <br />
    <table border="1" class="form" width="90%">
        <tr>
            <td align="center">
                <label for="kodebrg">Kode Barang</label><br>
                <select name="kodebrg" id="kodebrg" onchange="pilihkodebrg(value)">
                    <option value="M001">M001</option>
                    <option value="M002">M002</option>
                    <option value="M003">M003</option>
                    <option value="M004">M004</option>
                </select>
            </td>
            <td align="center">
                <label for="nama">Nama</label><br>
                <input type="text" name="nama" id="nama" readonly></input>
            </td>
            <td align="center">
                <label for="satuan">Satuan</label><br>
                <input type="text" name="satuan" id="satuan" readonly></input>
            </td>
            <td align="center">
                <label for="harga">Harga</label><br>
                <input type="text" name="harga" id="harga" readonly></input>
            </td>
            <td align="center">
                <label for="jumlah">Jumlah</label><br />
                <input type="text" name="jumlah" id="jumlah"></input>
            </td>
            <td align="center">
                <button type="button" onclick="myfunction()">Simpan</button>
            </td>
        </tr>
    </table>
    <div class="container-fluid" >
      <table id="mytable" class="table table-success" style="text-align: center;">
        <thead>
            <tr>
            <th>Kode</th>
            <th>Nama</th>
            <th>Satuan</th>
            <th>Harga</th>
            <th>Jumlah</th>
            <th>Total</th>
            <th>Action</th>
            </tr>
        </thead>
    </div>
			<br />
            <q>
			<label for="total">Total: </label>
			<label id="total">0</label></q>
            <b>
                <button class="back">Back</button>
            </b>
    </form>
    <script>
        var today = new Date();
        var kodetgl = today.getFullYear()+''+(today.getMonth()+1)+''+today.getDate()+
        ''+today.getHours()+''+today.getMinutes()+''+today.getSeconds();
        var tgl = today.getDate()+'/'+(today.getMonth()+1)+'/'+today.getFullYear();
        document.getElementById("kd").value = kodetgl;
        document.getElementById("tgl").value = tgl;
        kodetgl;
        tgl;

        function kar(p) {
				const jabatan = {
					Tirta: 'operator',
					Cahaya: 'operator',
					Hanta: `manager`,
					Maimunah: `manager`,
					Agung: `admin`,
					Buana: `admin`,
				};

				const elJab = document.querySelector(`#jabatan`);
				elJab.value = jabatan[`${p}`];
			}
            function pilihkodebrg(x) {
				const barang = {
					M001: { nama: "VGA", satuan: `pcs`, harga: 4000 },
					M002: { nama: "RAM", satuan: `pcs`, harga: 800 },
					M003: { nama: "CPU", satuan: `pcs`, harga: 2000 },
					M004: { nama: "Monitor", satuan: `pcs`, harga: 1500 },
				};
				console.log(x);
				const nama = document.querySelector(`#nama`);
				const satuan = document.querySelector(`#satuan`);
				const harga = document.querySelector(`#harga`);
				nama.value = barang[`${x}`].nama;
				satuan.value = barang[`${x}`].satuan;
				harga.value = barang[`${x}`].harga;
			}
            function myfunction() {
                    var table = document.getElementById("mytable");
                    var panjang = table.rows.length;
                    console.log("test");
                    var row = table.insertRow(panjang);
                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);
                    var cell3 = row.insertCell(2);
                    var cell4 = row.insertCell(3);
                    var cell5 = row.insertCell(4);
                    var cell6 = row.insertCell(5);
                    var cell7 = row.insertCell(6);
                    row.setAttribute("id", "idrow"+panjang);
                    row.setAttribute("class", "tr");
                    cell1.innerHTML = document.getElementById("kodebrg").value;
                    cell2.innerHTML = document.getElementById("nama").value;
                    cell3.innerHTML = document.getElementById("satuan").value;
                    cell4.innerHTML = document.getElementById("harga").value;
                    cell5.innerHTML = document.getElementById("jumlah").value;
                    var subtotal =
                        Number(document.getElementById("harga").value) *
                        Number(document.getElementById("jumlah").value);
                    cell6.innerHTML = subtotal;

                    var cancelBtn = document.createElement(`button`);
                    cancelBtn.textContent = `X`;
                    cancelBtn.setAttribute(`onclick`, `deleterow('idrow${panjang}')`);
                    cell7.insertAdjacentElement(`beforeend`, cancelBtn);
                    total();
            }
            function deleterow(rowid) {
				let row = document.querySelector(`#${rowid}`);
				row.remove();
				total();
			}
            function total() {
				let table = document.querySelector(`#mytable`);
				let panjang = table.rows.length;
				let total = 0;
				for (let i = 1; i < panjang; i++) {
					let data = table.rows[i].cells[5];
					data = parseInt(data.innerHTML);
					total = total + data;
				}
				// console.log(total);
				document.querySelector(`#total`).textContent = total;
				clearform();
			}
    </script>
</body>
</html>